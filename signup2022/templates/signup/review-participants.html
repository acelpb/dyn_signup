{% extends "base.html" %}
{% load crispy_forms_filters %}
{% load crispy_forms_tags %}
{% load crispy_forms_utils %}
{% load crispy_forms_field %}
{% load i18n %}

{% block smallcontent %}
<p>
    Voici les participants renseignés pour votre groupe.<br>
    Veuillez relire attentivement afin de vérifier que les informations introduites soient complètes.<br>
    Si vous souhaitez modifier les informations entrées, cliqurz-sur le bouton si dessous.<br>
    Si les informations sont correctes choississez soit:
<ul>
    <li>une inscription complète (vous participerez à toutes les journées de dynamobile) ,</li>
    <li>soit une inscription partielle (vous souhaitez sélectionner les jours auxquels vous participerez).</li>
</ul>
</p>

{% if form.forms %}
    <form method="post">
    {% for error in form.non_form_errors %}
        <div class="alert alert-danger" role="alert">{{ error }}</div>
    {% endfor %}
    {% csrf_token %}
    <div>
        {{ form.management_form|crispy }}
    </div>

    <table class="table table-striped table-sm">
        <thead>
        <tr>
            {% for field in form.forms.0 %}
                {% if field.label and not field.is_hidden %}
                    <th for="{{ field.auto_id }}"
                        class="col-form-label {% if field.field.required %}requiredField{% endif %}">
                        {{ field.label|safe }}{% if field.field.required and not field|is_checkbox %}
                            <span class="asteriskField">*</span>{% endif %}
                    </th>
                {% endif %}
            {% endfor %}
        </tr>

        </thead>

        <tbody>
        <tr class="d-none empty-form">
            {% for field in form.empty_form %}
                {% if field|is_checkbox %}
                    <td id="div_{{ field.auto_id }}" class="form-group">
                        {{ field }}
                    </td>
                {% else %}
                    {% include 'bootstrap4/field.html' with tag="td" form_show_labels=False %}
                {% endif %}
            {% endfor %}
        </tr>

        {% for subform in form %}
            {% if form_show_errors and not subform.is_extra %}
                {% include "bootstrap4/errors.html" %}
            {% endif %}
            <tr>
                {% for field in subform %}
                    {% if field|is_checkbox %}
                        <td id="div_{{ field.auto_id }}" class="form-group">
                            {{ field }}
                        </td>
                    {% else %}
                        {% include 'bootstrap4/field.html' with tag="td" form_show_labels=False %}
                    {% endif %}
                {% endfor %}
            </tr>
        {% endfor %}
        </tbody>
    </table>
    <a href="/signup-1" class="btn btn-danger">{% trans "Page précédete" %}</a>
    <button type="submit" class="btn btn-primary">{% trans "Confirmer comme inscription complète" %}</button>
    <a href="/signup-3" class="btn btn-secondary">{% trans "Créer une inscription Partielle" %}</a>
</form>
{% else %}
{% endif %}
{% endblock %}
